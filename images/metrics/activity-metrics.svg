<svg xmlns="http://www.w3.org/2000/svg" width="480" height="622" class="">
    <defs>
        <style/>
    </defs>
    <style>@keyframes animation-gauge{0%{stroke-dasharray:0 329}}@keyframes animation-rainbow{0%,to{color:#7f00ff;fill:#7f00ff}14%{color:#a933ff;fill:#a933ff}29%{color:#007fff;fill:#007fff}43%{color:#00ff7f;fill:#00ff7f}57%{color:#ff0;fill:#ff0}71%{color:#ff7f00;fill:#ff7f00}86%{color:red;fill:red}}svg{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;color:#777}h2,h3{margin:8px 0 2px;padding:0;color:#0366d6;font-weight:400}h2 svg,h3 svg{fill:currentColor}h2{font-size:16px}h3,svg{font-size:14px}section&gt;.field{margin-left:5px;margin-right:5px}.field{display:flex;align-items:center;margin-bottom:2px;white-space:nowrap}.field svg{margin:0 8px;fill:#959da5;flex-shrink:0}.field.warning{color:#d79533}.field.warning svg{fill:#d79533}.row{display:flex;flex-wrap:wrap}.row section{flex:1 1 0}.column{display:flex;flex-direction:column;align-items:center}.center{justify-content:center}.horizontal-wrap{flex-wrap:wrap}#metrics-end,.fill-width{width:100%}.categories,.category{display:flex;align-items:center}.categories{justify-content:space-around;margin-top:4px}.category{flex-direction:column;flex:1 1 0}.activity{margin-bottom:12px}.activity .field{width:100%;overflow:hidden;text-overflow:ellipsis;max-width:450px;white-space:nowrap;margin-bottom:0}.activity .field .content{flex-grow:1;text-overflow:ellipsis;overflow:hidden}.activity .commit .sha,.activity .issue,.activity .repo{display:inline;color:#58a6ff}.activity .code,span.code{background-color:#7777771f;padding:1px 5px;font-size:80%;border-radius:6px;color:#777;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;margin:0 4px -3px}.activity .details{padding-left:38px;display:flex;flex-direction:column;font-size:13px;color:#666}.activity .commit{display:flex;align-items:center}.activity .commit .sha,code{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace}.activity .commit .sha{margin-right:4px}.activity .commit .message{overflow:hidden;text-overflow:ellipsis;width:360px;white-space:nowrap}code{background-color:#7777771f;display:inline-block;border-radius:6px;color:#777;padding:1px 5px;font-size:80%}:root{--color-calendar-graph-day-bg:#ebedf0;--color-calendar-graph-day-border:rgba(27,31,35,0.06);--color-calendar-graph-day-L1-bg:#9be9a8;--color-calendar-graph-day-L2-bg:#40c463;--color-calendar-graph-day-L3-bg:#30a14e;--color-calendar-graph-day-L4-bg:#216e39;--color-calendar-halloween-graph-day-L1-bg:#ffee4a;--color-calendar-halloween-graph-day-L2-bg:#ffc501;--color-calendar-halloween-graph-day-L3-bg:#fe9600;--color-calendar-halloween-graph-day-L4-bg:#03001c;--color-calendar-winter-graph-day-L1-bg:#0a3069;--color-calendar-winter-graph-day-L2-bg:#0969da;--color-calendar-winter-graph-day-L3-bg:#54aeff;--color-calendar-winter-graph-day-L4-bg:#b6e3ff;--color-calendar-graph-day-L4-border:rgba(27,31,35,0.06);--color-calendar-graph-day-L3-border:rgba(27,31,35,0.06);--color-calendar-graph-day-L2-border:rgba(27,31,35,0.06);--color-calendar-graph-day-L1-border:rgba(27,31,35,0.06)}</style>
    <style/>
    <foreignObject x="0" y="0" width="100%" height="100%">
        <div xmlns="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/1999/xlink" class="items-wrapper">
            <section>
                <h2 class="field">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                        <path fill-rule="evenodd" d="M0 8a8 8 0 1116 0v5.25a.75.75 0 01-1.5 0V8a6.5 6.5 0 10-13 0v5.25a.75.75 0 01-1.5 0V8zm5.5 4.25a.75.75 0 01.75-.75h3.5a.75.75 0 010 1.5h-3.5a.75.75 0 01-.75-.75zM3 6.75C3 5.784 3.784 5 4.75 5h6.5c.966 0 1.75.784 1.75 1.75v1.5A1.75 1.75 0 0111.25 10h-6.5A1.75 1.75 0 013 8.25v-1.5zm1.47-.53a.75.75 0 011.06 0l.97.97.97-.97a.75.75 0 011.06 0l.97.97.97-.97a.75.75 0 111.06 1.06l-1.5 1.5a.75.75 0 01-1.06 0L8 7.81l-.97.97a.75.75 0 01-1.06 0l-1.5-1.5a.75.75 0 010-1.06z"/>
                    </svg>
                    Recent activity
                </h2>
                <div class="row">
                    <section>
                        <div class="row fill-width">
                            <section class="activity">
                                <div class="field">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                                        <path fill-rule="evenodd" d="M10.5 7.75a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zm1.43.75a4.002 4.002 0 01-7.86 0H.75a.75.75 0 110-1.5h3.32a4.001 4.001 0 017.86 0h3.32a.75.75 0 110 1.5h-3.32z"/>
                                    </svg>
                                    <div class="content">
                                        Pushed 1 commit in
                                        <span class="repo">jim60105/standalone-civitai-shortcut</span>
                                    </div>
                                </div>
                                <div class="details">
                                    <div>on branch <span class="code">master</span></div>
                                    <div class="commit">
                                        <div class="sha">#47c228d</div>
                                        <div class="message">fix(settings): resolve shortcut file not found in WebUI mode

- All shortcut and data file paths are now resolved relative to the extension base directory, not the current working directory.
- Updated path_manager.py to dynamically update all relevant paths after extension_base is set.
- Fixed migration and initialization logic to ensure correct file location in both WebUI and standalone modes.
- Updated tests to match new path resolution logic.

Resolves #WebUI-shortcut-path-bug

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                </div>
                            </section>
                        </div>
                        <div class="row fill-width">
                            <section class="activity">
                                <div class="field">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                                        <path fill-rule="evenodd" d="M11.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122V6A2.5 2.5 0 0110 8.5H6a1 1 0 00-1 1v1.128a2.251 2.251 0 11-1.5 0V5.372a2.25 2.25 0 111.5 0v1.836A2.492 2.492 0 016 7h4a1 1 0 001-1v-.628A2.25 2.25 0 019.5 3.25zM4.25 12a.75.75 0 100 1.5.75.75 0 000-1.5zM3.5 3.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0z"/>
                                    </svg>
                                    <div class="content">
                                        Created new
                      branch
                                        <span class="code">copilot/vscode1752253227754</span>
                                        in
                                        <span class="repo">jim60105/standalone-civitai-shortcut</span>
                                    </div>
                                </div>
                            </section>
                        </div>
                        <div class="row fill-width">
                            <section class="activity">
                                <div class="field">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                                        <path fill-rule="evenodd" d="M11.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122V6A2.5 2.5 0 0110 8.5H6a1 1 0 00-1 1v1.128a2.251 2.251 0 11-1.5 0V5.372a2.25 2.25 0 111.5 0v1.836A2.492 2.492 0 016 7h4a1 1 0 001-1v-.628A2.25 2.25 0 019.5 3.25zM4.25 12a.75.75 0 100 1.5.75.75 0 000-1.5zM3.5 3.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0z"/>
                                    </svg>
                                    <div class="content">
                                        Deleted
                      branch
                                        <span class="code">issue-49-refactor-setting-module</span>
                                        in
                                        <span class="repo">jim60105/standalone-civitai-shortcut</span>
                                    </div>
                                </div>
                            </section>
                        </div>
                        <div class="row fill-width">
                            <section class="activity">
                                <div class="field">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                                        <path d="M11.28 6.78a.75.75 0 00-1.06-1.06L7.25 8.69 5.78 7.22a.75.75 0 00-1.06 1.06l2 2a.75.75 0 001.06 0l3.5-3.5z"/>
                                        <path fill-rule="evenodd" d="M16 8A8 8 0 110 8a8 8 0 0116 0zm-1.5 0a6.5 6.5 0 11-13 0 6.5 6.5 0 0113 0z"/>
                                    </svg>
                                    <div class="content">
                                        Closed
                                        <span class="issue">#49 重構：拆分 setting.py 設定管理模組 (765 行)</span>
                                    </div>
                                </div>
                                <div class="details">
                                    <div>opened by bot0419 in <span class="repo">jim60105/standalone-civitai-shortcut</span></div>
                                </div>
                            </section>
                        </div>
                        <div class="row fill-width">
                            <section class="activity">
                                <div class="field">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                                        <path fill-rule="evenodd" d="M10.5 7.75a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zm1.43.75a4.002 4.002 0 01-7.86 0H.75a.75.75 0 110-1.5h3.32a4.001 4.001 0 017.86 0h3.32a.75.75 0 110 1.5h-3.32z"/>
                                    </svg>
                                    <div class="content">
                                        Pushed 22 commits in
                                        <span class="repo">jim60105/standalone-civitai-shortcut</span>
                                    </div>
                                </div>
                                <div class="details">
                                    <div>on branch <span class="code">master</span></div>
                                    <div class="commit">
                                        <div class="sha">#452d958</div>
                                        <div class="message">chore: simplify CI tests

- Add a new coverage config file to define branch coverage, source paths, omit patterns, output formats, and enforce a 70% coverage threshold for pytest
- Streamline the GitHub Actions test step to invoke pytest with default coverage flags instead of targeting a single package
- Ignore the generated coverage.json file in version control
- Update testing guidelines to use the simplified pytest coverage command (`pytest --cov`)

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#2938237</div>
                                        <div class="message">test: fix civitai http client tests to properly mock config_manager

Patch config_manager.get_setting in civitai http client tests to ensure mock values are used instead of real config file values. This prevents test pollution and ensures correct isolation. Resolves test failures caused by reading actual config. Related to issue #49.</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#12de7b8</div>
                                        <div class="message">test(model_factory): use shared PREVIEW_IMAGE_EXT constant in tests

- Import the PREVIEW_IMAGE_EXT constant from a shared location, and update the test to use this constant for setting the preview image extension instead of a hardcoded string.

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#ac02036</div>
                                        <div class="message">refactor(model): simplify folder management with in-memory tracking

- Refactor model folder management to remove JSON file persistence and default configuration loading; model folders are now tracked in memory and basic type mapping is used for compatibility, simplifying folder path resolution and maintenance.
- Remove the test for creating the gallery UI component and its associated mocking, leaving only the initialization and image loading tests.

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#26e38cc</div>
                                        <div class="message">chore(config): remove settings.json configuration file

- Remove the settings.json configuration file.

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#9bcbd58</div>
                                        <div class="message">refactor(settings): remove SPECIAL_KEY_MAPPINGS and use direct nested structure for NSFW filter

Refactored settings logic to eliminate SPECIAL_KEY_MAPPINGS and use a direct nested structure for NSFW filter settings. Updated config_manager to handle nested categories natively. Ensures KISS principle and improves maintainability. See issue context for details.

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#9b4f60b</div>
                                        <div class="message">fix(settings): add civitai_information_tab and related attributes for backward compatibility

Return default tab indices for civitai/usergal/download_information_tab to fix AttributeError in Gradio UI. All tests and lint checks passed. Resolves #49.

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#5a3e60a</div>
                                        <div class="message">refactor(settings): remove SettingDefaults and delegate to SettingCategories

- Removed the redundant SettingDefaults class and all its usages
- Updated all code and tests to use SettingCategories directly for default values
- Deleted setting_defaults.py and updated documentation to reflect the new architecture
- Ensured all tests pass and code quality standards are met

Resolves #49

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#3a5b5b9</div>
                                        <div class="message">refactor: centralize settings defaults and simplify access

- Add a new settings_guidelines.md with full design overview, component responsibilities, usage examples, best practices, and testing/migration guidance for the settings system.
- Simplify module-level attribute access by always using config_manager.get_setting and removing direct settings dict checks.
- Change ConfigManager to source defaults from SettingCategories, introduce a _search_nested_setting helper to resolve nested keys, and enhance get_setting fallback logic.
- Modify initialization to fetch the singleton config_manager from the settings package before running path setup and loading.
- Centralize all default values, category definitions, config mappings, and validation ranges inside SettingCategories, with new methods for fetching defaults, mappings, and categories.
- Strip out hardcoded defaults in SettingDefaults, making it a thin compatibility layer that delegates to SettingCategories.
- Revamp SettingValidator to pull numeric range rules from SettingCategories, auto-registering validation lambdas dynamically.
- Update gallery generation tests to mock config_manager.get_setting with a side_effect that returns specific NSFW settings instead of a single hardcoded value.

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#312cf95</div>
                                        <div class="message">refactor: refactor default constants to simplify imports

- Centralize all default constants (HTTP headers, tab indices, UI type names, etc.) into a new constants.py instead of defining them in setting_defaults.py
- Update imports throughout the codebase to pull DEFAULT_HEADERS and UI_TYPENAMES from constants rather than setting_defaults
- Clean up setting_defaults.py by stripping out in-file constant definitions, importing SD_DATA_ROOT from constants, and adding a note about centralized constants management

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#549f79d</div>
                                        <div class="message">refactor(constants): rename constants to uppercase

- Renamed several constant variables from lowercase to uppercase to follow naming conventions, including file extensions, NSFW levels, base models, default model folders, and UI type names.

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#a72adb8</div>
                                        <div class="message">fix(settings): resolve config file path confusion and improve code quality

- Fix remaining flake8 issues in settings/__init__.py and path_manager.py
- Remove unused import and add noqa annotation for false positive global warning
- Improve test coverage with proper config_path assertions
- Format test files with black for consistency
- All 83 core tests now passing after comprehensive setting module refactor

Resolves #49

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#1aa2620</div>
                                        <div class="message">refactor: unify settings API and secure image workflows

- Replace static `settings.nsfw_disable_image` references with the `settings.get_nsfw_disable_image` function across all image-handling code paths
- Change Gradio callbacks to use `show_progress="minimal"` and ensure `ex_shortcuts` is typed as `Optional[list]` with a safe default of an empty list
- Improve thumbnail-list routines to always return lists (never `None`), guard slicing on empty defaults, and extract `ex_shortcuts.value` when present
- Add debug logging at the start of settings save routines (`on_save_btn_click`, `save_setting`, `ConfigManager.save_settings`, and `SettingPersistence.save_to_file`) for better traceability
- Clean up imports by pulling in `Optional` from `typing`, unifying use of `settings.config_manager`, and adjusting the standalone path manager import path

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#ead21d5</div>
                                        <div class="message">refactor(settings): remove test-only workaround and ensure clean production logic

Remove MagicMock extension_base workaround from settings/__init__.py and ensure no test-specific logic remains in production code. All tests pass after cleanup. Related to settings, path manager, and shortcut action modules.

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#abf866c</div>
                                        <div class="message">fix: Resolve pytest failures related to settings module refactoring

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#c84f18e</div>
                                        <div class="message">chore: replace "setting" with "settings" throughout.

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#2199cd2</div>
                                        <div class="message">fix(tests): Adapt tests to settings module migration

- Adjusts test_civitai.py to import config_manager from the new settings module, resolving a pytest failure.
- Completes the migration from the legacy setting.py by updating all remaining imports across the application.
- Modules updated include civitai, downloader, http_client, and various _action modules.

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#32332b2</div>
                                        <div class="message">refactor: remove legacy setting.py entry point

- Remove the old setting.py file after migrating all logic to modular structure
- Update imports from setting.py to settings module in critical paths
- Update test files to use new modular settings imports
- All core functionality maintained through settings/ package
- Essential tests pass confirming backward compatibility

This removes the old centralized entry point in favor of the
new modular settings architecture with organized submodules:
- settings/constants.py - for constants and mappings
- settings/path_manager.py - for path and folder management
- settings/model_utils.py - for model-related utilities
- settings/initialization.py - for initialization routines
- settings/config_manager.py - for configuration management

Remaining non-critical imports of setting.py can be updated
incrementally as those modules are touched in future work.

Resolves the entry point migration task from the modular refactor.

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#bbfbd58</div>
                                        <div class="message">chore(instructions): add initial migration step to remove-refactored-entry-point guide

Add step 0 to migrate all remaining logic into new modules before deleting old entry point.

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                    <div class="commit">
                                        <div class="sha">#f57a9f8</div>
                                        <div class="message">refactor: centralize all configuration through ConfigManager

- Introduce a centralized ConfigManager and new settings package (with categories, defaults, persistence, validation) to replace hardcoded globals in setting.py
- Refactor setting.py to remove static constants and proxy all configuration access through config_manager.get_setting/set_setting, including API keys, batch sizes, NSFW filtering flags, and image path constants
- Update modules (http_client, downloader, gallery/classification/shortcut actions, util, recipe pages, etc.) to fetch configuration via ConfigManager instead of direct setting attributes
- Simplify and DRY up settings loading/migration (init, init_paths, migrate_existing_files, load_data) by delegating to ConfigManager and compatibility layer, cleaning up legacy logic
- Adjust tests across the suite to use config_manager.set_setting/get_setting and add new unit tests for ConfigManager, SettingCategories, SettingDefaults, SettingPersistence, and SettingValidator
- Polish logging messages and minor API fixes (e.g., use config_manager.get_setting for no_card_preview_image fallback, streamlined model folder path initialization)

Signed-off-by: Jim Chen &lt;Jim@ChenJ.im&gt;</div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </section>
                </div>
            </section>
            <section>
                <h2 class="field">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                        <path fill-rule="evenodd" d="M1.5 2.75a.25.25 0 01.25-.25h12.5a.25.25 0 01.25.25v8.5a.25.25 0 01-.25.25h-6.5a.75.75 0 00-.53.22L4.5 14.44v-2.19a.75.75 0 00-.75-.75h-2a.25.25 0 01-.25-.25v-8.5zM1.75 1A1.75 1.75 0 000 2.75v8.5C0 12.216.784 13 1.75 13H3v1.543a1.457 1.457 0 002.487 1.03L8.061 13h6.189A1.75 1.75 0 0016 11.25v-8.5A1.75 1.75 0 0014.25 1H1.75zm5.03 3.47a.75.75 0 010 1.06L5.31 7l1.47 1.47a.75.75 0 01-1.06 1.06l-2-2a.75.75 0 010-1.06l2-2a.75.75 0 011.06 0zm2.44 0a.75.75 0 000 1.06L10.69 7 9.22 8.47a.75.75 0 001.06 1.06l2-2a.75.75 0 000-1.06l-2-2a.75.75 0 00-1.06 0z"/>
                    </svg>
                    16 Languages
                </h2>
            </section>
            <section class="column">
                <h3 class="field">Most used languages</h3>
                <div class="field center horizontal-wrap fill-width">
                </div>
            </section>
        </div>
        <div xmlns="http://www.w3.org/1999/xhtml" id="metrics-end"></div>
    </foreignObject>
</svg>